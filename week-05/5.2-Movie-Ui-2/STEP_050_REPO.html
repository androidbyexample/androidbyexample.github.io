
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://androidbyexample.com/week-05/5.2-Movie-Ui-2/STEP_050_REPO.html">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Selection and Deletion - Android By Example</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
  
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 64C0 28.65 28.65 0 64 0h160v128c0 17.7 14.3 32 32 32h128v288c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V64zm256 64V0l128 128H256z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 64C0 28.65 28.65 0 64 0h160v128c0 17.7 14.3 32 32 32h128v288c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V64zm256 64V0l128 128H256z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 64C0 28.65 28.65 0 64 0h160v128c0 17.7 14.3 32 32 32h128v288c0 35.3-28.7 64-64 64H64c-35.35 0-64-28.7-64-64V64zm256 64V0l128 128H256z"/></svg>');}</style>

    
    
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
<!--<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">-->

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra-8.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dao-changes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="Android By Example" class="md-header__button md-logo" aria-label="Android By Example" data-md-component="logo">
      
  <img src="../../android.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Android By Example
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Selection and Deletion
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
<!--    <div class="md-sidebar md-sidebar&#45;&#45;primary" data-md-component="sidebar" data-md-type="navigation">-->
<div class="md-sidebar md-sidebar--primary" data-md-type="navigation">
    <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
            


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Android By Example" class="md-nav__button md-logo" aria-label="Android By Example" data-md-component="logo">
      
  <img src="../../android.png" alt="logo">

    </a>
    Android By Example
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        About This Site
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE-Code.html" class="md-nav__link">
        Source Code License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE-Content.html" class="md-nav__link">
        Content License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contact.html" class="md-nav__link">
        About Your Instructor
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Week 1  (Aug 31 - Sep 06)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 1  (Aug 31 - Sep 06)" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Week 1  (Aug 31 - Sep 06)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          1.1 Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.1 Introduction" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          1.1 Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.1-Introduction/index.html" class="md-nav__link">
        Welcome!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.1-Introduction/STEP_10_FULL.html" class="md-nav__link">
        Course Hardware and Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.1-Introduction/STEP_20_FULL.html" class="md-nav__link">
        Assignments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.1-Introduction/STEP_30_FULL.html" class="md-nav__link">
        Grading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.1-Introduction/STEP_40_FULL.html" class="md-nav__link">
        Using Third-Party and Course Sample Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          1.2 Android studio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.2 Android studio" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          1.2 Android studio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.2-Android-studio/index.html" class="md-nav__link">
        Android Studio
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          1.3 Activities
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1.3 Activities" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          1.3 Activities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-01/1.3-Activities/index.html" class="md-nav__link">
        Activities and Application Structure Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Week 2  (Sep 07 - Sep 13)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 2  (Sep 07 - Sep 13)" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Week 2  (Sep 07 - Sep 13)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          2.1 Kotlin primer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2.1 Kotlin primer" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          2.1 Kotlin primer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-02/2.1-Kotlin-primer/index.html" class="md-nav__link">
        Kotlin Primer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          2.2 Versions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2.2 Versions" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          2.2 Versions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-02/2.2-Versions/index.html" class="md-nav__link">
        Versions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          2.3 Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2.3 Architecture" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          2.3 Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-02/2.3-Architecture/index.html" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Week 3  (Sep 14 - Sep 20)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 3  (Sep 14 - Sep 20)" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Week 3  (Sep 14 - Sep 20)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_1">
          3.1 Room
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="3.1 Room" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          3.1 Room
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.1-Room/index.html" class="md-nav__link">
        Entities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.1-Room/STEP_10_FULL.html" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.1-Room/STEP_20_FULL.html" class="md-nav__link">
        Room Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.1-Room/STEP_25_FULL.html" class="md-nav__link">
        Room Relations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.1-Room/STEP_30_FULL.html" class="md-nav__link">
        Suspending Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.1-Room/STEP_40_FULL.html" class="md-nav__link">
        The Repository
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          3.2 Movie Database
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="3.2 Movie Database" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          3.2 Movie Database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/index.html" class="md-nav__link">
        Movie Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_020_REPO.html" class="md-nav__link">
        Project Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_030_REPO.html" class="md-nav__link">
        Add Data/Repository Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_040_REPO.html" class="md-nav__link">
        Add Room
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_050_REPO.html" class="md-nav__link">
        Module Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_060_REPO.html" class="md-nav__link">
        Entities, DAO and Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_070_REPO.html" class="md-nav__link">
        Repository Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_080_REPO.html" class="md-nav__link">
        Sample Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_090_REPO.html" class="md-nav__link">
        Hideous UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_100_REPO.html" class="md-nav__link">
        Rating with Movies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_110_REPO.html" class="md-nav__link">
        Refactoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-03/3.2-Movie-Database/STEP_120_FULL.html" class="md-nav__link">
        Wrap-Up
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Week 4  (Sep 21 - Sep 27)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 4  (Sep 21 - Sep 27)" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Week 4  (Sep 21 - Sep 27)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_1">
          4.1 Compose basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="4.1 Compose basics" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          4.1 Compose basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.1-Compose-basics/index.html" class="md-nav__link">
        Compose Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.1-Compose-basics/STEP_10_FULL.html" class="md-nav__link">
        Writing Composable Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.1-Compose-basics/STEP_20_FULL.html" class="md-nav__link">
        Collecting Flows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.1-Compose-basics/STEP_30_FULL.html" class="md-nav__link">
        Calling View Model Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.1-Compose-basics/STEP_40_FULL.html" class="md-nav__link">
        Calling View Model Accessors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.1-Compose-basics/STEP_50_FULL.html" class="md-nav__link">
        View Model Buckets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_2" type="checkbox" id="__nav_8_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_2">
          4.2 Movie Ui 1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="4.2 Movie Ui 1" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          4.2 Movie Ui 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/index.html" class="md-nav__link">
        Movie UI, part 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_020_REPO.html" class="md-nav__link">
        Project Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_025_FULL.html" class="md-nav__link">
        Application Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_030_REPO.html" class="md-nav__link">
        Screen State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_040_REPO.html" class="md-nav__link">
        Basic Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_050_REPO.html" class="md-nav__link">
        Actors <-> Movies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_055_FULL.html" class="md-nav__link">
        Scaffold - A Slotted API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_060_REPO.html" class="md-nav__link">
        UI From the Outside
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_070_REPO.html" class="md-nav__link">
        Copying Extended Icons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-04/4.2-Movie-Ui-1/STEP_080_FULL.html" class="md-nav__link">
        Wrap Up
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Week 5  (Sep 28 - Oct 04)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 5  (Sep 28 - Oct 04)" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Week 5  (Sep 28 - Oct 04)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_1" type="checkbox" id="__nav_9_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_1">
          5.1 Compose Lists
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="5.1 Compose Lists" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_1">
          <span class="md-nav__icon md-icon"></span>
          5.1 Compose Lists
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5.1-Compose-Lists/index.html" class="md-nav__link">
        Compose Lists
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          5.2 Movie Ui 2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="5.2 Movie Ui 2" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          5.2 Movie Ui 2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Movie UI, part 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="STEP_020_REPO.html" class="md-nav__link">
        Scrolling Columns and LazyList
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="STEP_030_REPO.html" class="md-nav__link">
        Cleanup the display screens
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="STEP_040_REPO.html" class="md-nav__link">
        Refactor the list screens
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Selection and Deletion
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="STEP_050_REPO.html" class="md-nav__link md-nav__link--active">
        Selection and Deletion
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dao-changes" class="md-nav__link">
    DAO changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repository-changes" class="md-nav__link">
    Repository Changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view-model-changes" class="md-nav__link">
    View Model Changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-and-movie-scaffold-changes" class="md-nav__link">
    List and Movie Scaffold Changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#top-level-ui-changes" class="md-nav__link">
    Top-Level Ui Changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#but-theres-a-problem" class="md-nav__link">
    But there's a problem...
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="STEP_060_REPO.html" class="md-nav__link">
        Referential Integrity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="STEP_070_REPO.html" class="md-nav__link">
        Editing Entities
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Week 6  (Oct 05 - Oct 11)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 6  (Oct 05 - Oct 11)" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Week 6  (Oct 05 - Oct 11)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1" type="checkbox" id="__nav_10_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10_1">
          6.1 Compose graphics 1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="6.1 Compose graphics 1" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_1">
          <span class="md-nav__icon md-icon"></span>
          6.1 Compose graphics 1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-06/6.1-Compose-graphics-1/index.html" class="md-nav__link">
        Compose Graphics 1
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Week 7  (Oct 12 - Oct 18)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 7  (Oct 12 - Oct 18)" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Week 7  (Oct 12 - Oct 18)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_1" type="checkbox" id="__nav_11_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_1">
          7.1 Compose graphics 2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="7.1 Compose graphics 2" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_1">
          <span class="md-nav__icon md-icon"></span>
          7.1 Compose graphics 2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-07/7.1-Compose-graphics-2/index.html" class="md-nav__link">
        Compose Graphics 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Week 8  (Oct 19 - Oct 25)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 8  (Oct 19 - Oct 25)" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Week 8  (Oct 19 - Oct 25)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_1" type="checkbox" id="__nav_12_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_1">
          8.1 Rest
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="8.1 Rest" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_1">
          <span class="md-nav__icon md-icon"></span>
          8.1 Rest
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-08/8.1-Rest/index.html" class="md-nav__link">
        Rest
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_2" type="checkbox" id="__nav_12_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_2">
          8.2 Compose Layouts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="8.2 Compose Layouts" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_2">
          <span class="md-nav__icon md-icon"></span>
          8.2 Compose Layouts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-08/8.2-Compose-Layouts/index.html" class="md-nav__link">
        Compose Layouts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12_3" type="checkbox" id="__nav_12_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12_3">
          8.3 Compose Toast Snackbar Dialog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="8.3 Compose Toast Snackbar Dialog" data-md-level="2">
        <label class="md-nav__title" for="__nav_12_3">
          <span class="md-nav__icon md-icon"></span>
          8.3 Compose Toast Snackbar Dialog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-08/8.3-Compose-Toast-Snackbar-Dialog/index.html" class="md-nav__link">
        Compose Toast Snackbar Dialog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Week 9  (Oct 26 - Nov 01)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 9  (Oct 26 - Nov 01)" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Week 9  (Oct 26 - Nov 01)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1" type="checkbox" id="__nav_13_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1">
          9.1 Google map
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="9.1 Google map" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_1">
          <span class="md-nav__icon md-icon"></span>
          9.1 Google map
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/index.html" class="md-nav__link">
        Google Maps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_020_REPO.html" class="md-nav__link">
        Project Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_022_FULL.html" class="md-nav__link">
        Find Your Fingerprint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_025_FULL.html" class="md-nav__link">
        Google Console Project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_030_REPO.html" class="md-nav__link">
        Set up a map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_040_REPO.html" class="md-nav__link">
        Add a Marker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_050_REPO.html" class="md-nav__link">
        Initial Position
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_060_REPO.html" class="md-nav__link">
        Loading Spinner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_070_REPO.html" class="md-nav__link">
        Map Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_080_REPO.html" class="md-nav__link">
        Current Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_090_REPO.html" class="md-nav__link">
        Jump to Current Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_100_REPO.html" class="md-nav__link">
        Add Top Bar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_110_REPO.html" class="md-nav__link">
        Copy Icons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_120_REPO.html" class="md-nav__link">
        Manage Car Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_130_REPO.html" class="md-nav__link">
        Dragging a Marker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_140_REPO.html" class="md-nav__link">
        Navigating
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.1-Google-map/STEP_150_REPO.html" class="md-nav__link">
        Lat/Lon Bounds
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_2" type="checkbox" id="__nav_13_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_2">
          9.2 Speech
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="9.2 Speech" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_2">
          <span class="md-nav__icon md-icon"></span>
          9.2 Speech
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-09/9.2-Speech/index.html" class="md-nav__link">
        Speech
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          Week 10  (Nov 02 - Nov 08)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 10  (Nov 02 - Nov 08)" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Week 10  (Nov 02 - Nov 08)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_1" type="checkbox" id="__nav_14_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14_1">
          10.1 Reading writing files
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="10.1 Reading writing files" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_1">
          <span class="md-nav__icon md-icon"></span>
          10.1 Reading writing files
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-10/10.1-Reading-writing-files/index.html" class="md-nav__link">
        Reading Writing Files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_2" type="checkbox" id="__nav_14_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14_2">
          10.2 Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="10.2 Services" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_2">
          <span class="md-nav__icon md-icon"></span>
          10.2 Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-10/10.2-Services/index.html" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_3" type="checkbox" id="__nav_14_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14_3">
          10.3 Widgets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="10.3 Widgets" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_3">
          <span class="md-nav__icon md-icon"></span>
          10.3 Widgets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-10/10.3-Widgets/index.html" class="md-nav__link">
        Widgets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          Week 11  (Nov 09 - Nov 15)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 11  (Nov 09 - Nov 15)" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          Week 11  (Nov 09 - Nov 15)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15_1" type="checkbox" id="__nav_15_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15_1">
          11.1 Dependency injection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="11.1 Dependency injection" data-md-level="2">
        <label class="md-nav__title" for="__nav_15_1">
          <span class="md-nav__icon md-icon"></span>
          11.1 Dependency injection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-11/11.1-Dependency-injection/index.html" class="md-nav__link">
        Dependency Injection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-11/11.1-Dependency-injection/STEP_020_REPO.html" class="md-nav__link">
        Manual Injection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-11/11.1-Dependency-injection/STEP_030_REPO.html" class="md-nav__link">
        Hilt Injection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-11/11.1-Dependency-injection/STEP_040_FULL.html" class="md-nav__link">
        Wrapup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Week 12  (Nov 16 - Nov 22)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 12  (Nov 16 - Nov 22)" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Week 12  (Nov 16 - Nov 22)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16_1" type="checkbox" id="__nav_16_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16_1">
          12.1 Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="12.1 Testing" data-md-level="2">
        <label class="md-nav__title" for="__nav_16_1">
          <span class="md-nav__icon md-icon"></span>
          12.1 Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-12/12.1-Testing/index.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16_2" type="checkbox" id="__nav_16_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16_2">
          12.2 Nfc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="12.2 Nfc" data-md-level="2">
        <label class="md-nav__title" for="__nav_16_2">
          <span class="md-nav__icon md-icon"></span>
          12.2 Nfc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-12/12.2-Nfc/index.html" class="md-nav__link">
        NFC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          Week 13  (Nov 30 - Dec 06)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 13  (Nov 30 - Dec 06)" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Week 13  (Nov 30 - Dec 06)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17_1" type="checkbox" id="__nav_17_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17_1">
          13.1 Legacy views
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="13.1 Legacy views" data-md-level="2">
        <label class="md-nav__title" for="__nav_17_1">
          <span class="md-nav__icon md-icon"></span>
          13.1 Legacy views
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-13/13.1-Legacy-views/index.html" class="md-nav__link">
        Legacy Views
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17_2" type="checkbox" id="__nav_17_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17_2">
          13.2 Legacy fragments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="13.2 Legacy fragments" data-md-level="2">
        <label class="md-nav__title" for="__nav_17_2">
          <span class="md-nav__icon md-icon"></span>
          13.2 Legacy fragments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-13/13.2-Legacy-fragments/index.html" class="md-nav__link">
        Legacy Fragments
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          Week 14  (Dec 07 - Dec 13)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Week 14  (Dec 07 - Dec 13)" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          Week 14  (Dec 07 - Dec 13)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18_1" type="checkbox" id="__nav_18_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18_1">
          14.1 Sensors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="14.1 Sensors" data-md-level="2">
        <label class="md-nav__title" for="__nav_18_1">
          <span class="md-nav__icon md-icon"></span>
          14.1 Sensors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-14/14.1-Sensors/index.html" class="md-nav__link">
        Sensors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18_2" type="checkbox" id="__nav_18_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18_2">
          14.2 Publishing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="14.2 Publishing" data-md-level="2">
        <label class="md-nav__title" for="__nav_18_2">
          <span class="md-nav__icon md-icon"></span>
          14.2 Publishing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-14/14.2-Publishing/index.html" class="md-nav__link">
        Publishing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18_3" type="checkbox" id="__nav_18_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18_3">
          14.3 Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="14.3 Resources" data-md-level="2">
        <label class="md-nav__title" for="__nav_18_3">
          <span class="md-nav__icon md-icon"></span>
          14.3 Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-14/14.3-Resources/index.html" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18_4" type="checkbox" id="__nav_18_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18_4">
          14.4 Clean architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="14.4 Clean architecture" data-md-level="2">
        <label class="md-nav__title" for="__nav_18_4">
          <span class="md-nav__icon md-icon"></span>
          14.4 Clean architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../week-14/14.4-Clean-architecture/index.html" class="md-nav__link">
        Clean Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
        </div>
    </div>
</div>

          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
<div class="sas1-text-column">

<h1>5.2 Movie Ui 2</h1>

<h2>Selection and Deletion</h2>
    
<p>Now the real fun begins... Selecting items on the main list screens and deleting them from the database.</p>
<p>Let's start in the <strong>Data Layer</strong>. We're going to have a set of ids of items we want to delete. We can either look up all the items and then pass them to our existing <code>delete</code> functions, or, we can create new DAO functions that will delete by ids. I prefer the latter, as we don't need to do additional lookups.</p>
<h2 id="dao-changes">DAO changes</h2>
<p>In the DAO, we add</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;DELETE FROM Movie WHERE id IN (:ids)&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kd">abstract</span><span class="w"> </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteMoviesById</span><span class="p">(</span><span class="n">ids</span><span class="p">:</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;DELETE FROM Actor WHERE id IN (:ids)&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kd">abstract</span><span class="w"> </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteActorsById</span><span class="p">(</span><span class="n">ids</span><span class="p">:</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;DELETE FROM Rating WHERE id IN (:ids)&quot;</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="kd">abstract</span><span class="w"> </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteRatingsById</span><span class="p">(</span><span class="n">ids</span><span class="p">:</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="repository-changes">Repository Changes</h2>
<p>We add simple pass-throughs in the repository, making them available in the view model.</p>
<h2 id="view-model-changes">View Model Changes</h2>
<p>Things get a little more interesting here. We need to track what's selected on the screen.</p>
<p>We could add the selection information to the <code>Screen</code> objects that allow selection, but then we'd need to be able to update the <code>Screen</code> objects or replace the top <code>Screen</code> on the stack.</p>
<p>Instead, we decide that because only one list <code>Screen</code> is visible at a time, <em>and</em> we cannot navigate when items are selected, we'll just keep a single selection set in the view model:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">var</span><span class="w"> </span><span class="nv">selectedItemIds</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="o">&lt;</span><span class="n">Set</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">emptySet</span><span class="p">())</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="k">set</span><span class="w"></span>
</code></pre></div>
<p>Using Compose <code>State</code> means that whenever we update the value, Compose will trigger recomposition on users of that data, if needed. <em>However</em>, to keep the view model consistent, we must make sure we clear the selected items whenever we navigate:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the selected items were stored in the <code>Screen</code> we wouldn't need this clear step.</p>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">private</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nv">screenStack</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Screen</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listOf</span><span class="p">(</span><span class="n">MovieList</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="k">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">        </span><span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="n">screen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">lastOrNull</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">        </span><span class="n">clearSelections</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">clearSelections</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="n">selectedItemIds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">emptySet</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>We've defined a <code>clearSelections</code> function that does what it says, and call it whenever the <code>screenStack</code> changes.</p>
<p>We'll finish out the functions we need to manage the selections and delete entities:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">toggleSelection</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="n">selectedItemIds</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">selectedItemIds</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">            </span><span class="n">selectedItemIds</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">            </span><span class="n">selectedItemIds</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteSelectedActors</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="n">repository</span><span class="p">.</span><span class="na">deleteActorsById</span><span class="p">(</span><span class="n">selectedItemIds</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="n">clearSelections</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteSelectedMovies</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">        </span><span class="n">repository</span><span class="p">.</span><span class="na">deleteMoviesById</span><span class="p">(</span><span class="n">selectedItemIds</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">        </span><span class="n">clearSelections</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteSelectedRatings</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">    </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">        </span><span class="n">repository</span><span class="p">.</span><span class="na">deleteRatingsById</span><span class="p">(</span><span class="n">selectedItemIds</span><span class="p">)</span><span class="w"></span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="w">        </span><span class="n">clearSelections</span><span class="p">()</span><span class="w"></span>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The <code>toggleSelection</code> function will be called when the user interacts with an item:</p>
<ul>
<li>If they click its icon, we call toggleSelection</li>
<li>If they long-press anywhere on a row, call toggleSelection</li>
<li>If the click anywhere else in the row<ul>
<li>If there are no selections, navigate to the item detail</li>
<li>If there are selections, treat it as a toggle</li>
</ul>
</li>
</ul>
<p>The delete functions kick off a coroutine to do the deletions and then clear the selection set.</p>
<h2 id="list-and-movie-scaffold-changes">List and Movie Scaffold Changes</h2>
<p>Here's where the interesting work happens. We pass in some new parameters</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nd">@Composable</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kd">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">ListScaffold</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="p">...</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="n">selectedItemIds</span><span class="p">:</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w">           </span><span class="c1">// the current selections</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="n">onClearSelections</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">Unit</span><span class="p">,</span><span class="w">          </span><span class="c1">// tell the caller to clear</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="n">onToggleSelection</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">String</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">Unit</span><span class="p">,</span><span class="w">    </span><span class="c1">// toggle an item&#39;s id</span><span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="n">onDeleteSelectedItems</span><span class="p">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">Unit</span><span class="p">,</span><span class="w">      </span><span class="c1">// delete all selected items</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="p">...</span><span class="w"></span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Any screen that wants to display a top-level list must tell us what's selected, how to update selections and delete the selected items.</p>
<p>Some of this info gets passed to <code>MovieScaffold</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nd">@Composable</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kd">fun</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">ListScaffold</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="p">...</span><span class="w"></span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MovieScaffold</span><span class="p">(</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="p">...</span><span class="w"></span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="n">selectedItemCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">selectedItemIds</span><span class="p">.</span><span class="na">size</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="p">...</span><span class="w"></span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="n">onDeleteSelectedItems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">onDeleteSelectedItems</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="n">onClearSelections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">onClearSelections</span><span class="p">,</span><span class="w"></span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p><code>MovieScaffold</code> is pretty straightforward:</p>
<ul>
<li>If <code>selectedItemCount</code> is zero, display normal top app bar</li>
<li>If <code>selectedItemCount</code> is non-zero, display contextual top app bar<ul>
<li>Has "back" arrow icon - calls <code>onClearSelections</code> when pressed</li>
<li>Shows <code>selectedItemCount</code></li>
<li>Has "delete" action - calls <code>onDeleteSelectedItems</code> when pressed</li>
</ul>
</li>
</ul>
<p>The rest of <code>ListScaffold</code> has some interesting parts:</p>
<ul>
<li>
<p>We select a <code>backgroundColor</code> and <code>contentColor</code> based on whether or not an item is selected. (An item is considered selected if its id is in <code>selectedItemIds</code>)</p>
</li>
<li>
<p>We define a <code>pointerInput</code> modifier to process user taps and long-presses, calling the appropriate functions that were passed into <code>ListScaffold</code>.</p>
</li>
<li>
<p>We set the <code>backgroundColor</code> on the <code>Card</code> (and remove it from the <code>Row</code>), based on the selection status.</p>
</li>
<li>
<p>We set the colors for the <code>Icon</code> background and foreground, again based on the selection status, and make the icon clickable.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>contentColorFor</code> function is a great helper that automates the selection of a color on top of a background color</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The lambda that defines the gesture handler only runs once, and then again whenever the key passed to <code>pointerInput</code> changes. The gesture handler would capture the value of <code>selectedItemIds</code> - if the selections change, the gesture handler would never know of it.</p>
<p>We could either pass <code>selectedItemIds</code> as a key to <code>pointerInput</code>, forcing it to redefine the gesture handler <em>every</em> time the selections change, or, we can create an updateable bucket in the composition tree for the selections. We'll use the latter to avoid redefining the gesture handlers.</p>
</div>
<h2 id="top-level-ui-changes">Top-Level Ui Changes</h2>
<p>Finally, we wire the screens to the view model, passing in the selected ids and the new view model functions to clear/toggle selections and delete selected items.</p>
<h2 id="but-theres-a-problem">But there's a problem...</h2>
<p>When we run the code from this step, we can select and delete items. But we run into trouble when we try to look at roles that reference deleted data.</p>
<p>For example, if we delete "The Transporter", then try to view "Jason Statham", we get </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>E/AndroidRuntime: FATAL EXCEPTION: main
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    Process: com.javadude.movies, PID: 17550
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    java.lang.NullPointerException: Parameter specified as non-null is null:
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>       method kotlin.jvm.internal.Intrinsics.checkNotNullParameter,
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>       parameter movie
</code></pre></div>
<p>The problem is that The Transporter is still referenced by <code>Role</code> entities. When we try to load Jason Statham's filmography, Room cannot resolve the reference and throws an exception.</p>
<p>Our database is now inconsistent!</p>
  
</div>
  
<div class="sas1-code-column">
  
<h2>Code Changes</h2>
  
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/MovieViewModel.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/MovieViewModel.kt';">
<pre>
package com.javadude.movies                                                       
                                                                                  
import android.app.Application                                                    
import androidx.compose.runtime.getValue                                          
import androidx.compose.runtime.mutableStateOf                                    
import androidx.compose.runtime.setValue                                          
import androidx.lifecycle.AndroidViewModel                                        
import androidx.lifecycle.viewModelScope                                          
import com.javadude.movies.repository.MovieDatabaseRepository                     
import com.javadude.movies.repository.MovieRepository                             
import kotlinx.coroutines.launch                                                  
                                                                                  
sealed interface Screen                                                           
                                                                                  
object RatingList: Screen                                                         
object MovieList: Screen                                                          
object ActorList: Screen                                                          
                                                                                  
data class RatingDisplay(                                                         
    val id: String                                                                
): Screen                                                                         
data class ActorDisplay(                                                          
    val id: String                                                                
): Screen                                                                         
data class MovieDisplay(                                                          
    val id: String                                                                
): Screen                                                                         
                                                                                  
class MovieViewModel(application: Application) : AndroidViewModel(application) {  
    private val repository: MovieRepository = MovieDatabaseRepository(application)
                                                                                  
    private var screenStack: List<Screen> = listOf(MovieList)                     
        set(value) {                                                              
            field = value                                                         
            screen = value.lastOrNull()                                           
<ins>            clearSelections()                                                     </ins>
<ins>        }                                                                         </ins>
                                                                                  
<ins>    var selectedItemIds by mutableStateOf<Set<String>>(emptySet())                </ins>
<ins>        private set                                                               </ins>
                                                                                  
<ins>    fun clearSelections() {                                                       </ins>
<ins>        selectedItemIds = emptySet()                                              </ins>
<ins>    }                                                                             </ins>
<ins>    fun toggleSelection(id: String) {                                             </ins>
<ins>        selectedItemIds =                                                         </ins>
<ins>            if (id in selectedItemIds) {                                          </ins>
<ins>                selectedItemIds - id                                              </ins>
<ins>            } else {                                                              </ins>
<ins>                selectedItemIds + id                                              </ins>
<ins>            }                                                                     </ins>
<ins>    }                                                                             </ins>
<ins>    fun deleteSelectedActors() {                                                  </ins>
<ins>        viewModelScope.launch {                                                   </ins>
<ins>            repository.deleteActorsById(selectedItemIds)                          </ins>
<ins>            clearSelections()                                                     </ins>
<ins>        }                                                                         </ins>
<ins>    }                                                                             </ins>
<ins>    fun deleteSelectedMovies() {                                                  </ins>
<ins>        viewModelScope.launch {                                                   </ins>
<ins>            repository.deleteMoviesById(selectedItemIds)                          </ins>
<ins>            clearSelections()                                                     </ins>
<ins>        }                                                                         </ins>
<ins>    }                                                                             </ins>
<ins>    fun deleteSelectedRatings() {                                                 </ins>
<ins>        viewModelScope.launch {                                                   </ins>
<ins>            repository.deleteRatingsById(selectedItemIds)                         </ins>
<ins>            clearSelections()                                                     </ins>
<ins>        }                                                                         </ins>
    }                                                                             
                                                                                  
    fun pushScreen(screen: Screen) {                                              
        screenStack = screenStack + screen                                        
    }                                                                             
    fun popScreen() {                                                             
        if (screenStack.isNotEmpty()) {                                           
            screenStack = screenStack.dropLast(1)                                 
        }                                                                         
    }                                                                             
    fun setScreenStack(screen: Screen) {                                          
        screenStack = listOf(screen)                                              
    }                                                                             
                                                                                  
    var screen by mutableStateOf<Screen?>(MovieList)                              
        private set                                                               
                                                                                  
    val ratingsFlow = repository.ratingsFlow                                      
    val moviesFlow = repository.moviesFlow                                        
    val actorsFlow = repository.actorsFlow                                        
                                                                                  
    suspend fun getRatingWithMovies(id: String) =                                 
        repository.getRatingWithMovies(id)                                        
                                                                                  
    suspend fun getMovieWithCast(id: String) =                                    
        repository.getMovieWithCast(id)                                           
                                                                                  
    suspend fun getActorWithFilmography(id: String) =                             
        repository.getActorWithFilmography(id)                                    
                                                                                  
    fun resetDatabase() {                                                         
        viewModelScope.launch {                                                   
            repository.resetDatabase()                                            
        }                                                                         
    }                                                                             
}                                                                                 
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/components/ListScaffold.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/components/ListScaffold.kt';">
<pre>
package com.javadude.movies.components                                                               
                                                                                                     
import androidx.annotation.StringRes                                                                 
import androidx.compose.foundation.background                                                        
import androidx.compose.foundation.clickable                                                         
<ins>import androidx.compose.foundation.gestures.detectTapGestures                                        </ins>
import androidx.compose.foundation.layout.Row                                                        
import androidx.compose.foundation.layout.RowScope                                                   
import androidx.compose.foundation.layout.fillMaxWidth                                               
import androidx.compose.foundation.layout.padding                                                    
import androidx.compose.foundation.layout.size                                                       
import androidx.compose.foundation.lazy.LazyColumn                                                   
import androidx.compose.foundation.lazy.items                                                        
import androidx.compose.foundation.shape.CircleShape                                                 
import androidx.compose.material.Card                                                                
import androidx.compose.material.Icon                                                                
import androidx.compose.material.MaterialTheme                                                       
<ins>import androidx.compose.material.contentColorFor                                                     </ins>
import androidx.compose.runtime.Composable                                                           
<ins>import androidx.compose.runtime.getValue                                                             </ins>
<ins>import androidx.compose.runtime.rememberUpdatedState                                                 </ins>
import androidx.compose.ui.Alignment                                                                 
import androidx.compose.ui.Modifier                                                                  
import androidx.compose.ui.graphics.vector.ImageVector                                               
<ins>import androidx.compose.ui.input.pointer.pointerInput                                                </ins>
import androidx.compose.ui.res.stringResource                                                        
import androidx.compose.ui.unit.dp                                                                   
import com.javadude.movies.Screen                                                                    
                                                                                                     
@Composable                                                                                          
fun <T> ListScaffold(                                                                                
    @StringRes titleId: Int,                                                                         
    items: List<T>,                                                                                  
<ins>    selectedItemIds: Set<String>,                                                                    </ins>
<ins>    onClearSelections: () -> Unit,                                                                   </ins>
<ins>    onToggleSelection: (String) -> Unit,                                                             </ins>
<ins>    onDeleteSelectedItems: () -> Unit,                                                               </ins>
    getId: (T) -> String,                                                                            
    onSelectListScreen: (Screen) -> Unit,                                                            
    onResetDatabase: () -> Unit,                                                                     
    onItemClick: (String) -> Unit,                                                                   
    itemIcon: ImageVector,                                                                           
    @StringRes itemIconContentDescriptionId: Int,                                                    
    itemContent: @Composable RowScope.(T) -> Unit,                                                   
) = MovieScaffold(                                                                                   
    title = stringResource(id = titleId),                                                            
    onSelectListScreen = onSelectListScreen,                                                         
<ins>    selectedItemCount = selectedItemIds.size,                                                        </ins>
    onResetDatabase = onResetDatabase,                                                               
<ins>    onDeleteSelectedItems = onDeleteSelectedItems,                                                   </ins>
<ins>    onClearSelections = onClearSelections,                                                           </ins>
) { paddingValues ->                                                                                 
    LazyColumn(                                                                                      
        modifier = Modifier                                                                          
            .padding(paddingValues)                                                                  
            .padding(8.dp)                                                                           
    ) {                                                                                              
        items(                                                                                       
            items = items,                                                                           
            key = { getId(it) },                                                                     
        ) { item ->                                                                                  
<ins>            val id = getId(item)                                                                     </ins>
                                                                                                     
<ins>            val backgroundColor =                                                                    </ins>
<ins>                if (id in selectedItemIds) {                                                         </ins>
<ins>                    MaterialTheme.colors.primary                                                     </ins>
<ins>                } else {                                                                             </ins>
<ins>                    MaterialTheme.colors.surface                                                     </ins>
<ins>                }                                                                                    </ins>
                                                                                                     
<ins>            val contentColor = MaterialTheme.colors.contentColorFor(backgroundColor)                 </ins>
                                                                                                     
<ins>            // The .pointerInput modifier captures any values referenced - it would never            </ins>
<ins>            //   know the selections have changed. By using rememberUpdatedState, we create          </ins>
<ins>            //   a bucket in the tree that can be updated on recomposition and force                 </ins>
<ins>            //   the pointerInput lambda to always get the latest value                              </ins>
<ins>            // (Fortunately you don't need to do this often, but if a lambda doesn't seem to         </ins>
<ins>            //   see changes in parameters, you may need to do this.)                                </ins>
<ins>            val selectedIds by rememberUpdatedState(newValue = selectedItemIds)                      </ins>
                                                                                                     
            Card(                                                                                    
                elevation = 4.dp,                                                                    
<ins>                backgroundColor = backgroundColor,                                                   </ins>
                modifier = Modifier                                                                  
                    .padding(8.dp)                                                                   
                    .fillMaxWidth()                                                                  
                                                                                                     
<ins>                    // NOTE: pointerInput captures the value of selectedItemIds                      </ins>
<ins>                    //       By referencing it through a rememberUpdatedState above, it'll see       </ins>
<ins>                    //       updates. Note that we _must_ reference selectedIds inside the lambda    </ins>
<ins>                    //       to see the updated value.                                               </ins>
<ins>                    //       Note - we could also pass selectedItemIds instead of true - this would  </ins>
<ins>                    //              force pointerInput to reinitialize whenever the selection changes</ins>
<ins>                    //              That might be expensive to recreate the gesture handler every    </ins>
<ins>                    //              time, OR if the gesture handler held state that would be cleared </ins>
<ins>                    //              might not give the proper results.                               </ins>
<ins>                    .pointerInput(true) {                                                            </ins>
<ins>                        detectTapGestures(                                                           </ins>
<ins>                            onLongPress = {                                                          </ins>
<ins>                                onToggleSelection(id)                                                </ins>
<ins>                            },                                                                       </ins>
<ins>                            onTap = {                                                                </ins>
<ins>                                if (selectedIds.isNotEmpty()) {                                      </ins>
<ins>                                    onToggleSelection(id)                                            </ins>
<ins>                                } else {                                                             </ins>
<ins>                                    onItemClick(id)                                                  </ins>
<ins>                                }                                                                    </ins>
<ins>                            }                                                                        </ins>
<ins>                        )                                                                            </ins>
<ins>                    },                                                                               </ins>
            ) {                                                                                      
                Row(                                                                                 
                    verticalAlignment = Alignment.CenterVertically,                                  
                    modifier = Modifier                                                              
                        .padding(8.dp)                                                               
<del>//                      .clickable { onItemClick(getId(item)) }                                      </del>
                ) {                                                                                  
                    Icon(                                                                            
                        imageVector = itemIcon,                                                      
<del>//                      tint = MaterialTheme.colors.surface,                                         </del>
<ins>                        tint = backgroundColor,                                                      </ins>
                        contentDescription = stringResource(id = itemIconContentDescriptionId),      
                        modifier = Modifier                                                          
                            .size(48.dp)                                                             
                            .background(                                                             
<del>//                              color = MaterialTheme.colors.primary,                                </del>
<ins>                                color = contentColor,                                                </ins>
                                shape = CircleShape                                                  
                            )                                                                        
<ins>                            .clickable {                                                             </ins>
<ins>                                onToggleSelection(id)                                                </ins>
<ins>                            }                                                                        </ins>
                    )                                                                                
                    itemContent(item)                                                                
                }                                                                                    
            }                                                                                        
        }                                                                                            
    }                                                                                                
}                                                                                                    
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/components/MovieScaffold.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/components/MovieScaffold.kt';">
<pre>
package com.javadude.movies.components                                                                  
                                                                                                        
import androidx.annotation.StringRes                                                                    
import androidx.compose.foundation.layout.PaddingValues                                                 
import androidx.compose.foundation.layout.RowScope                                                      
import androidx.compose.foundation.layout.padding                                                       
import androidx.compose.material.BottomNavigation                                                       
import androidx.compose.material.BottomNavigationItem                                                   
import androidx.compose.material.Icon                                                                   
import androidx.compose.material.IconButton                                                             
import androidx.compose.material.Scaffold                                                               
import androidx.compose.material.Text                                                                   
import androidx.compose.material.TopAppBar                                                              
import androidx.compose.material.icons.Icons                                                            
<ins>import androidx.compose.material.icons.filled.ArrowBack                                                 </ins>
<ins>import androidx.compose.material.icons.filled.Delete                                                    </ins>
import androidx.compose.material.icons.filled.Emergency                                                 
import androidx.compose.material.icons.filled.Movie                                                     
import androidx.compose.material.icons.filled.Person                                                    
import androidx.compose.material.icons.filled.Refresh                                                   
import androidx.compose.runtime.Composable                                                              
import androidx.compose.ui.Modifier                                                                     
import androidx.compose.ui.graphics.vector.ImageVector                                                  
import androidx.compose.ui.res.stringResource                                                           
import androidx.compose.ui.unit.dp                                                                      
import com.javadude.movies.ActorList                                                                    
import com.javadude.movies.MovieList                                                                    
import com.javadude.movies.R                                                                            
import com.javadude.movies.RatingList                                                                   
import com.javadude.movies.Screen                                                                       
                                                                                                        
@Composable                                                                                             
fun MovieScaffold(                                                                                      
    title: String,                                                                                      
<ins>    selectedItemCount: Int = 0,                                                                         </ins>
<ins>    onClearSelections: () -> Unit = {},                                                                 </ins>
<ins>    onDeleteSelectedItems: () -> Unit = {},                                                             </ins>
    onSelectListScreen: (Screen) -> Unit,                                                               
    onResetDatabase: () -> Unit,                                                                        
    content: @Composable (PaddingValues) -> Unit,                                                       
) {                                                                                                     
    Scaffold(                                                                                           
        topBar = {                                                                                      
<ins>            if (selectedItemCount == 0) {                                                               </ins>
                TopAppBar(                                                                              
                    title = { SimpleText(text = title) },                                               
                    actions = {                                                                         
                        IconButton(                                                                     
                            onClick = onResetDatabase,                                                  
                            modifier = Modifier.padding(8.dp),                                          
                        ) {                                                                             
                            Icon(                                                                       
                                imageVector = Icons.Default.Refresh,                                    
                                contentDescription = stringResource(id = R.string.reset_database)       
                            )                                                                           
                        }                                                                               
                    }                                                                                   
                )                                                                                       
                                                                                                        
<ins>            } else {                                                                                    </ins>
<ins>                TopAppBar(                                                                              </ins>
<ins>                    navigationIcon = {                                                                  </ins>
<ins>                        IconButton(                                                                     </ins>
<ins>                            onClick = onClearSelections,                                                </ins>
<ins>                            modifier = Modifier.padding(8.dp),                                          </ins>
<ins>                        ) {                                                                             </ins>
<ins>                            Icon(                                                                       </ins>
<ins>                                imageVector = Icons.Default.ArrowBack,                                  </ins>
<ins>                                contentDescription = stringResource(id = R.string.clear_selections),    </ins>
<ins>                            )                                                                           </ins>
<ins>                        }                                                                               </ins>
<ins>                    },                                                                                  </ins>
<ins>                    title = { SimpleText(text = selectedItemCount.toString()) },                        </ins>
<ins>                    actions = {                                                                         </ins>
<ins>                        IconButton(                                                                     </ins>
<ins>                            onClick = onDeleteSelectedItems,                                            </ins>
<ins>                            modifier = Modifier.padding(8.dp),                                          </ins>
<ins>                        ) {                                                                             </ins>
<ins>                            Icon(                                                                       </ins>
<ins>                                imageVector = Icons.Default.Delete,                                     </ins>
<ins>                                contentDescription = stringResource(id = R.string.delete_selected_items)</ins>
<ins>                            )                                                                           </ins>
<ins>                        }                                                                               </ins>
<ins>                    }                                                                                   </ins>
<ins>                )                                                                                       </ins>
<ins>            }                                                                                           </ins>
        },                                                                                              
        content = { paddingValues ->                                                                    
            content(paddingValues)                                                                      
        },                                                                                              
        bottomBar = {                                                                                   
            BottomNavigation {                                                                          
                ScreenSelectButton(                                                                     
                    targetScreen = RatingList,                                                          
                    imageVector = Icons.Default.Emergency,                                              
                    labelId = R.string.screen_title_ratings,                                            
                    onSelectListScreen = onSelectListScreen                                             
                )                                                                                       
                ScreenSelectButton(                                                                     
                    targetScreen = MovieList,                                                           
                    imageVector = Icons.Default.Movie,                                                  
                    labelId = R.string.screen_title_movies,                                             
                    onSelectListScreen = onSelectListScreen                                             
                )                                                                                       
                ScreenSelectButton(                                                                     
                    targetScreen = ActorList,                                                           
                    imageVector = Icons.Default.Person,                                                 
                    labelId = R.string.screen_title_actors,                                             
                    onSelectListScreen = onSelectListScreen                                             
                )                                                                                       
            }                                                                                           
        }                                                                                               
    )                                                                                                   
}                                                                                                       
                                                                                                        
@Composable                                                                                             
fun RowScope.ScreenSelectButton(                                                                        
    targetScreen: Screen,                                                                               
    imageVector: ImageVector,                                                                           
    @StringRes labelId: Int,                                                                            
    onSelectListScreen: (Screen) -> Unit,                                                               
) =                                                                                                     
    BottomNavigationItem(                                                                               
        selected = false,                                                                               
        icon = {                                                                                        
            Icon(                                                                                       
                imageVector = imageVector,                                                              
                contentDescription = stringResource(id = labelId)                                       
            )                                                                                           
        },                                                                                              
        label = {                                                                                       
            Text(text = stringResource(id = labelId))                                                   
        },                                                                                              
        onClick = {                                                                                     
            onSelectListScreen(targetScreen)                                                            
        }                                                                                               
    )                                                                                                   
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/screens/ActorList.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/screens/ActorList.kt';">
<pre>
package com.javadude.movies.screens                                 
                                                                    
import androidx.compose.foundation.layout.fillMaxWidth              
import androidx.compose.foundation.layout.padding                   
import androidx.compose.foundation.lazy.LazyColumn                  
import androidx.compose.foundation.lazy.items                       
import androidx.compose.material.Card                               
import androidx.compose.material.Text                               
import androidx.compose.material.icons.Icons                        
import androidx.compose.material.icons.filled.Person                
import androidx.compose.runtime.Composable                          
import androidx.compose.ui.Modifier                                 
import androidx.compose.ui.res.stringResource                       
import androidx.compose.ui.unit.dp                                  
import com.javadude.movies.R                                        
import com.javadude.movies.Screen                                   
import com.javadude.movies.components.ListScaffold                  
import com.javadude.movies.components.MovieScaffold                 
import com.javadude.movies.components.SimpleText                    
import com.javadude.movies.repository.ActorDto                      
                                                                    
@Composable                                                         
fun ActorList(                                                      
    actors: List<ActorDto>,                                         
    onSelectListScreen: (Screen) -> Unit,                           
    onResetDatabase: () -> Unit,                                    
<ins>    selectedItemIds: Set<String>,                                   </ins>
<ins>    onClearSelections: () -> Unit,                                  </ins>
<ins>    onToggleSelection: (String) -> Unit,                            </ins>
<ins>    onDeleteSelectedItems: () -> Unit,                              </ins>
    onActorClick: (String) -> Unit,                                 
) = ListScaffold(                                                   
    titleId = R.string.screen_title_actors,                         
    items = actors,                                                 
    getId = { it.id },                                              
    onSelectListScreen = onSelectListScreen,                        
    onResetDatabase = onResetDatabase,                              
    onItemClick = onActorClick,                                     
    itemIcon = Icons.Default.Person,                                
    itemIconContentDescriptionId = R.string.tap_to_toggle_selection,
<ins>    selectedItemIds = selectedItemIds,                              </ins>
<ins>    onClearSelections = onClearSelections,                          </ins>
<ins>    onToggleSelection = onToggleSelection,                          </ins>
<ins>    onDeleteSelectedItems = onDeleteSelectedItems,                  </ins>
) { actor ->                                                        
    SimpleText(text = actor.name)                                   
}                                                                   
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/screens/MovieList.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/screens/MovieList.kt';">
<pre>
package com.javadude.movies.screens                                 
                                                                    
import androidx.compose.material.icons.Icons                        
import androidx.compose.material.icons.filled.Person                
import androidx.compose.runtime.Composable                          
import com.javadude.movies.R                                        
import com.javadude.movies.Screen                                   
import com.javadude.movies.components.ListScaffold                  
import com.javadude.movies.components.SimpleText                    
import com.javadude.movies.repository.MovieDto                      
                                                                    
@Composable                                                         
fun MovieList(                                                      
    movies: List<MovieDto>,                                         
    onSelectListScreen: (Screen) -> Unit,                           
    onResetDatabase: () -> Unit,                                    
    onMovieClick: (String) -> Unit,                                 
<ins>    selectedItemIds: Set<String>,                                   </ins>
<ins>    onClearSelections: () -> Unit,                                  </ins>
<ins>    onToggleSelection: (String) -> Unit,                            </ins>
<ins>    onDeleteSelectedItems: () -> Unit,                              </ins>
) = ListScaffold(                                                   
    titleId = R.string.screen_title_movies,                         
    items = movies,                                                 
    getId = { it.id },                                              
    onSelectListScreen = onSelectListScreen,                        
    onResetDatabase = onResetDatabase,                              
    onItemClick = onMovieClick,                                     
    itemIcon = Icons.Default.Person,                                
    itemIconContentDescriptionId = R.string.tap_to_toggle_selection,
<ins>    selectedItemIds = selectedItemIds,                              </ins>
<ins>    onClearSelections = onClearSelections,                          </ins>
<ins>    onToggleSelection = onToggleSelection,                          </ins>
<ins>    onDeleteSelectedItems = onDeleteSelectedItems,                  </ins>
) { movie ->                                                        
    SimpleText(text = movie.title)                                  
}                                                                   
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/screens/RatingList.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/screens/RatingList.kt';">
<pre>
package com.javadude.movies.screens                                 
                                                                    
import androidx.compose.material.icons.Icons                        
import androidx.compose.material.icons.filled.Person                
import androidx.compose.runtime.Composable                          
import com.javadude.movies.R                                        
import com.javadude.movies.Screen                                   
import com.javadude.movies.components.ListScaffold                  
import com.javadude.movies.components.SimpleText                    
import com.javadude.movies.repository.RatingDto                     
                                                                    
@Composable                                                         
fun RatingList(                                                     
    ratings: List<RatingDto>,                                       
    onSelectListScreen: (Screen) -> Unit,                           
    onResetDatabase: () -> Unit,                                    
    onRatingClick: (String) -> Unit,                                
<ins>    selectedItemIds: Set<String>,                                   </ins>
<ins>    onClearSelections: () -> Unit,                                  </ins>
<ins>    onToggleSelection: (String) -> Unit,                            </ins>
<ins>    onDeleteSelectedItems: () -> Unit,                              </ins>
) = ListScaffold(                                                   
    titleId = R.string.screen_title_ratings,                        
    items = ratings,                                                
    getId = { it.id },                                              
    onSelectListScreen = onSelectListScreen,                        
    onResetDatabase = onResetDatabase,                              
    onItemClick = onRatingClick,                                    
    itemIcon = Icons.Default.Person,                                
    itemIconContentDescriptionId = R.string.tap_to_toggle_selection,
<ins>    selectedItemIds = selectedItemIds,                              </ins>
<ins>    onClearSelections = onClearSelections,                          </ins>
<ins>    onToggleSelection = onToggleSelection,                          </ins>
<ins>    onDeleteSelectedItems = onDeleteSelectedItems,                  </ins>
) { rating ->                                                       
    SimpleText(text = rating.name)                                  
}                                                                   
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/java/com/javadude/movies/screens/Ui.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/java/com/javadude/movies/screens/Ui.kt';">
<pre>
package com.javadude.movies.screens                                           
                                                                              
import androidx.activity.compose.BackHandler                                  
import androidx.compose.runtime.Composable                                    
import androidx.compose.runtime.collectAsState                                
import androidx.compose.runtime.getValue                                      
import androidx.lifecycle.viewmodel.compose.viewModel                         
import com.javadude.movies.ActorDisplay                                       
import com.javadude.movies.ActorList                                          
import com.javadude.movies.MovieDisplay                                       
import com.javadude.movies.MovieList                                          
import com.javadude.movies.MovieViewModel                                     
import com.javadude.movies.RatingDisplay                                      
import com.javadude.movies.RatingList                                         
                                                                              
@Composable                                                                   
fun Ui(                                                                       
    viewModel: MovieViewModel = viewModel(),                                  
    onExit: () -> Unit,                                                       
) {                                                                           
    BackHandler {                                                             
        viewModel.popScreen()                                                 
    }                                                                         
                                                                              
    val ratings by viewModel.ratingsFlow.collectAsState(initial = emptyList())
    val movies by viewModel.moviesFlow.collectAsState(initial = emptyList())  
    val actors by viewModel.actorsFlow.collectAsState(initial = emptyList())  
                                                                              
    when(val screen = viewModel.screen) {                                     
        null -> onExit()                                                      
                                                                              
        RatingList -> RatingList(                                             
            ratings = ratings,                                                
            onSelectListScreen = viewModel::setScreenStack,                   
            onResetDatabase = viewModel::resetDatabase,                       
            onRatingClick = { id ->                                           
                viewModel.pushScreen(RatingDisplay(id))                       
<del>//          }                                                                 </del>
<ins>            },                                                                </ins>
<ins>            selectedItemIds = viewModel.selectedItemIds,                      </ins>
<ins>            onClearSelections = viewModel::clearSelections,                   </ins>
<ins>            onToggleSelection = viewModel::toggleSelection,                   </ins>
<ins>            onDeleteSelectedItems = viewModel::deleteSelectedRatings,         </ins>
        )                                                                     
        MovieList -> MovieList(                                               
            movies = movies,                                                  
            onSelectListScreen = viewModel::setScreenStack,                   
            onResetDatabase = viewModel::resetDatabase,                       
            onMovieClick = { id ->                                            
                viewModel.pushScreen(MovieDisplay(id))                        
<del>//          }                                                                 </del>
<ins>            },                                                                </ins>
<ins>            selectedItemIds = viewModel.selectedItemIds,                      </ins>
<ins>            onClearSelections = viewModel::clearSelections,                   </ins>
<ins>            onToggleSelection = viewModel::toggleSelection,                   </ins>
<ins>            onDeleteSelectedItems = viewModel::deleteSelectedMovies,          </ins>
        )                                                                     
        ActorList -> ActorList(                                               
            actors = actors,                                                  
            onSelectListScreen = viewModel::setScreenStack,                   
            onResetDatabase = viewModel::resetDatabase,                       
            onActorClick = { id ->                                            
                viewModel.pushScreen(ActorDisplay(id))                        
<del>//          }                                                                 </del>
<ins>            },                                                                </ins>
<ins>            selectedItemIds = viewModel.selectedItemIds,                      </ins>
<ins>            onClearSelections = viewModel::clearSelections,                   </ins>
<ins>            onToggleSelection = viewModel::toggleSelection,                   </ins>
<ins>            onDeleteSelectedItems = viewModel::deleteSelectedActors,          </ins>
        )                                                                     
                                                                              
        is RatingDisplay -> RatingDisplay(                                    
            ratingId = screen.id,                                             
            fetchRatingWithMovies = { id ->                                   
                viewModel.getRatingWithMovies(id)                             
            },                                                                
            onSelectListScreen = viewModel::setScreenStack,                   
            onResetDatabase = viewModel::resetDatabase,                       
            onMovieClick = { id ->                                            
                viewModel.pushScreen(MovieDisplay(id))                        
            }                                                                 
        )                                                                     
        is MovieDisplay -> MovieDisplay(                                      
            movieId = screen.id,                                              
            fetchMovieWithCast = viewModel::getMovieWithCast,                 
            onSelectListScreen = viewModel::setScreenStack,                   
            onResetDatabase = viewModel::resetDatabase,                       
            onActorClick = { id ->                                            
                viewModel.pushScreen(ActorDisplay(id))                        
            }                                                                 
        )                                                                     
        is ActorDisplay -> ActorDisplay(                                      
            actorId = screen.id,                                              
            fetchActorWithFilmography = viewModel::getActorWithFilmography,   
            onSelectListScreen = viewModel::setScreenStack,                   
            onResetDatabase = viewModel::resetDatabase,                       
            onMovieClick = { id ->                                            
                viewModel.pushScreen(MovieDisplay(id))                        
            }                                                                 
        )                                                                     
    }                                                                         
}                                                                             
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /app/src/main/res/values/strings.xml</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/app/src/main/res/values/strings.xml';">
<pre>
<resources>                                                                                
    <string name="app_name">Movies</string>                                                
    <string name="reset_database">Reset Database</string>                                  
                                                                                           
    <string name="screen_title_ratings">MPAA Ratings</string>                              
    <string name="screen_title_movies">Movies</string>                                     
    <string name="screen_title_actors">Actors</string>                                     
                                                                                           
    <string name="movies">Movies that are rated %1$s</string>                              
    <string name="filmography">Films that feature %1$s</string>                            
    <string name="cast">Cast</string>                                                      
                                                                                           
    <string name="no_movies_found_for_this_rating">No movies found for this rating</string>
    <string name="tap_to_toggle_selection">Tap to toggle selection</string>                
<ins>    <string name="clear_selections">Clear selections</string>                              </ins>
<ins>    <string name="delete_selected_items">Delete selected items</string>                    </ins>
                                                                                           
    <string name="loading">Loading</string>                                                
</resources>                                                                               
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /data/src/main/java/com/javadude/movies/data/MovieDAO.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/data/src/main/java/com/javadude/movies/data/MovieDAO.kt';">
<pre>
package com.javadude.movies.data                                                                   
                                                                                                   
import androidx.room.Dao                                                                           
import androidx.room.Delete                                                                        
import androidx.room.Insert                                                                        
import androidx.room.Query                                                                         
import androidx.room.Transaction                                                                   
import androidx.room.Update                                                                        
import kotlinx.coroutines.flow.Flow                                                                
                                                                                                   
private val NotRated = Rating(id = "r0", name = "Not Rated", description = "Not yet rated")        
private val G = Rating(id = "r1", name = "G", description = "General Audiences")                   
private val PG = Rating(id = "r2", name = "PG", description = "Parental Guidance Suggested")       
private val PG13 = Rating(id = "r3", name = "PG-13", description = "Unsuitable for those under 13")
private val R = Rating(id = "r4", name = "R", description = "Restricted - 17 and older")           
                                                                                                   
@Dao                                                                                               
abstract class MovieDAO {                                                                          
    @Query("SELECT * FROM Rating")                                                                 
    abstract fun getRatingsFlow(): Flow<List<Rating>>                                              
                                                                                                   
    @Query("SELECT * FROM Movie")                                                                  
    abstract fun getMoviesFlow(): Flow<List<Movie>>                                                
                                                                                                   
    @Query("SELECT * FROM Actor")                                                                  
    abstract fun getActorsFlow(): Flow<List<Actor>>                                                
                                                                                                   
    @Transaction                                                                                   
    @Query("SELECT * FROM Rating WHERE id = :id")                                                  
    abstract suspend fun getRatingWithMovies(id: String): RatingWithMovies                         
                                                                                                   
    @Transaction                                                                                   
    @Query("SELECT * FROM Actor WHERE id = :id")                                                   
    abstract suspend fun getActorWithFilmography(id: String): ActorWithFilmography                 
                                                                                                   
    @Transaction                                                                                   
    @Query("SELECT * FROM Movie WHERE id = :id")                                                   
    abstract suspend fun getMovieWithCast(id: String): MovieWithCast                               
                                                                                                   
    @Insert                                                                                        
    abstract suspend fun insert(vararg ratings: Rating)                                            
    @Insert                                                                                        
    abstract suspend fun insert(vararg movies: Movie)                                              
    @Insert                                                                                        
    abstract suspend fun insert(vararg actors: Actor)                                              
    @Insert                                                                                        
    abstract suspend fun insert(vararg roles: Role)                                                
                                                                                                   
    @Update                                                                                        
    abstract suspend fun update(vararg ratings: Rating)                                            
    @Update                                                                                        
    abstract suspend fun update(vararg movies: Movie)                                              
    @Update                                                                                        
    abstract suspend fun update(vararg actors: Actor)                                              
    @Update                                                                                        
    abstract suspend fun update(vararg roles: Role)                                                
                                                                                                   
    @Delete                                                                                        
    abstract suspend fun delete(vararg ratings: Rating)                                            
    @Delete                                                                                        
    abstract suspend fun delete(vararg movies: Movie)                                              
    @Delete                                                                                        
    abstract suspend fun delete(vararg actors: Actor)                                              
    @Delete                                                                                        
    abstract suspend fun delete(vararg roles: Role)                                                
                                                                                                   
<ins>    @Query("DELETE FROM Movie WHERE id IN (:ids)")                                                 </ins>
<ins>    abstract suspend fun deleteMoviesById(ids: Set<String>)                                        </ins>
<ins>    @Query("DELETE FROM Actor WHERE id IN (:ids)")                                                 </ins>
<ins>    abstract suspend fun deleteActorsById(ids: Set<String>)                                        </ins>
<ins>    @Query("DELETE FROM Rating WHERE id IN (:ids)")                                                </ins>
<ins>    abstract suspend fun deleteRatingsById(ids: Set<String>)                                       </ins>
                                                                                                   
    @Query("DELETE FROM Movie")                                                                    
    abstract suspend fun clearMovies()                                                             
    @Query("DELETE FROM Actor")                                                                    
    abstract suspend fun clearActors()                                                             
    @Query("DELETE FROM Rating")                                                                   
    abstract suspend fun clearRatings()                                                            
    @Query("DELETE FROM Role")                                                                     
    abstract suspend fun clearRoles()                                                              
                                                                                                   
    @Transaction                                                                                   
    open suspend fun resetDatabase() {                                                             
        clearMovies()                                                                              
        clearActors()                                                                              
        clearRoles()                                                                               
        clearRatings()                                                                             
                                                                                                   
        insert(NotRated, G, PG, PG13, R)                                                           
                                                                                                   
        insert(                                                                                    
            Movie("m1", "The Transporter", "Jason Statham kicks a guy in the face", "r3"),         
            Movie("m2", "Transporter 2", "Jason Statham kicks a bunch of guys in the face", "r4"), 
            Movie("m3", "Hobbs and Shaw", "Cars, Explosions and Stuff", "r3"),                     
            Movie("m4", "Jumanji - Welcome to the Jungle", "The Rock smolders", "r3"),             
        )                                                                                          
        insert(                                                                                    
            Actor("a1", "Jason Statham"),                                                          
            Actor("a2", "The Rock"),                                                               
            Actor("a3", "Shu Qi"),                                                                 
            Actor("a4", "Amber Valletta"),                                                         
            Actor("a5", "Kevin Hart"),                                                             
        )                                                                                          
        insert(                                                                                    
            Role("m1", "a1", "Frank Martin", 1),                                                   
            Role("m1", "a3", "Lai", 2),                                                            
            Role("m2", "a1", "Frank Martin", 1),                                                   
            Role("m2", "a4", "Audrey Billings", 2),                                                
            Role("m3", "a2", "Hobbs", 1),                                                          
            Role("m3", "a1", "Shaw", 2),                                                           
            Role("m4", "a2", "Spencer", 1),                                                        
            Role("m4", "a5", "Fridge", 2),                                                         
        )                                                                                          
    }                                                                                              
}                                                                                                  
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /repository/src/main/java/com/javadude/movies/repository/MovieDatabaseRepository.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/repository/src/main/java/com/javadude/movies/repository/MovieDatabaseRepository.kt';">
<pre>
package com.javadude.movies.repository                                                   
                                                                                         
import android.content.Context                                                           
import com.javadude.movies.data.createDao                                                
import kotlinx.coroutines.flow.map                                                       
                                                                                         
class MovieDatabaseRepository(context: Context): MovieRepository {                       
    private val dao = createDao(context)                                                 
                                                                                         
    override val ratingsFlow =                                                           
        dao.getRatingsFlow()                                                             
            .map { ratings ->                                                            
                ratings.map { it.toDto() }                                               
            }                                                                            
    override val moviesFlow =                                                            
        dao.getMoviesFlow()                                                              
            .map { movies ->                                                             
                movies.map { it.toDto() }                                                
            }                                                                            
    override val actorsFlow =                                                            
        dao.getActorsFlow()                                                              
            .map { actors ->                                                             
                actors.map { it.toDto() }                                                
            }                                                                            
                                                                                         
    override suspend fun getRatingWithMovies(id: String): RatingWithMoviesDto =          
        dao.getRatingWithMovies(id).toDto()                                              
                                                                                         
    override suspend fun getMovieWithCast(id: String): MovieWithCastDto =                
        dao.getMovieWithCast(id).toDto()                                                 
                                                                                         
    override suspend fun getActorWithFilmography(id: String): ActorWithFilmographyDto =  
        dao.getActorWithFilmography(id).toDto()                                          
                                                                                         
    override suspend fun insert(movie: MovieDto) = dao.insert(movie.toEntity())          
    override suspend fun insert(actor: ActorDto) = dao.insert(actor.toEntity())          
    override suspend fun insert(rating: RatingDto) = dao.insert(rating.toEntity())       
                                                                                         
    override suspend fun update(movie: MovieDto) = dao.update(movie.toEntity())          
    override suspend fun update(actor: ActorDto) = dao.update(actor.toEntity())          
    override suspend fun update(rating: RatingDto) = dao.update(rating.toEntity())       
                                                                                         
    override suspend fun delete(movie: MovieDto) = dao.delete(movie.toEntity())          
    override suspend fun delete(actor: ActorDto) = dao.delete(actor.toEntity())          
    override suspend fun delete(rating: RatingDto) = dao.delete(rating.toEntity())       
                                                                                         
<ins>    override suspend fun deleteMoviesById(ids: Set<String>) = dao.deleteMoviesById(ids)  </ins>
<ins>    override suspend fun deleteActorsById(ids: Set<String>) = dao.deleteActorsById(ids)  </ins>
<ins>    override suspend fun deleteRatingsById(ids: Set<String>) = dao.deleteRatingsById(ids)</ins>
                                                                                         
    override suspend fun resetDatabase() = dao.resetDatabase()                           
}                                                                                        
</pre>
</div>
</details>
<details class="example" open>
<summary>CHANGED: /repository/src/main/java/com/javadude/movies/repository/MovieRepository.kt</summary>
<div class="sas1-code-file" style="--sas1-file-name: '/repository/src/main/java/com/javadude/movies/repository/MovieRepository.kt';">
<pre>
package com.javadude.movies.repository                                      
                                                                            
import kotlinx.coroutines.flow.Flow                                         
                                                                            
interface MovieRepository {                                                 
    val ratingsFlow: Flow<List<RatingDto>>                                  
    val moviesFlow: Flow<List<MovieDto>>                                    
    val actorsFlow: Flow<List<ActorDto>>                                    
                                                                            
    suspend fun getRatingWithMovies(id: String): RatingWithMoviesDto        
    suspend fun getMovieWithCast(id: String): MovieWithCastDto              
    suspend fun getActorWithFilmography(id: String): ActorWithFilmographyDto
                                                                            
    suspend fun insert(movie: MovieDto)                                     
    suspend fun insert(actor: ActorDto)                                     
    suspend fun insert(rating: RatingDto)                                   
                                                                            
    suspend fun update(movie: MovieDto)                                     
    suspend fun update(actor: ActorDto)                                     
    suspend fun update(rating: RatingDto)                                   
                                                                            
    suspend fun delete(movie: MovieDto)                                     
    suspend fun delete(actor: ActorDto)                                     
    suspend fun delete(rating: RatingDto)                                   
                                                                            
<ins>    suspend fun deleteMoviesById(ids: Set<String>)                          </ins>
<ins>    suspend fun deleteActorsById(ids: Set<String>)                          </ins>
<ins>    suspend fun deleteRatingsById(ids: Set<String>)                         </ins>
                                                                            
    suspend fun resetDatabase()                                             
}                                                                           
</pre>
</div>
</details>
  
</div>

            </article>
            
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="STEP_040_REPO.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Refactor the list screens" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Refactor the list screens
            </div>
          </div>
        </a>
      
      <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
          <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Scott Stanchfield. All content licensed <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International (CC BY 4.0)</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
          
        </div>
      </div>    
      
        
        <a href="STEP_060_REPO.html" class="md-footer__link md-footer__link--next" aria-label="Next: Referential Integrity" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Referential Integrity
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.top", "search.suggest", "search.highlight", "navigation.instant", "navigation.tracking", "navigation.sections", "toc.integrate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>